<html>
<head>
  <link href='style.css' rel='stylesheet' />
</head>
<body>
  <script src='../common.js'></script>
  <script src='../diagram.js'></script>
  <script>
    var Diagram = require('diagram');
    var diagram = new Diagram({ plugins: [ 'selectionUI', 'drag' ] });

    diagram.inject([ 'events', 'canvas', function(events, canvas) {

      events.on('connection.added', function(event) {
        console.log('connection added', event);
      });

      events.on('shape.added', function(event) {
        console.log('shape added', event);
      });

      events.on('shape.hover', function(event) {
        console.log('shape hover', event);
      });

      events.on('shape.out', function(event) {
        console.log('shape out', event);
      });

      events.on('shape.click', function(event) {
        console.log('shape click', event);
      });

      events.on('connection.hover', function(event) {
        console.log('connection hover', event);
      });
      
      events.on('connection.out', function(event) {
        console.log('connection out', event);
      });

      var s1 = {x: 10, y: 20, width: 100, height: 80 };
      var s2 = {x: 80, y: 10, width: 300, height: 140 };
      var s3 = {x: 100, y: 20, width: 100, height: 80, parent: s2 };
      var s4 = {x: 300, y: 300, width: 100, height: 80 };

      canvas
        .addShape(s1)
        .addShape(s2)
        .addShape(s3)
        .addShape(s4);
      
      canvas.addConnection({ waypoints: [ { x: 25, y: 25 }, {x: 115, y: 115} ]});
    }]);
  </script>
</body>